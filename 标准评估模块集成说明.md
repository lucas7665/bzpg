# 标准评估模块集成说明

## 功能概述

标准评估模块已成功集成到Java项目中，提供基于DeepSeek大模型的标准化评估功能。用户可以通过Web页面直接访问和使用该功能。

## 访问方式

### 页面访问
- **URL**: `http://localhost:9999/admin/evaluation`
- **说明**: 直接访问，无需登录认证

### API接口
- **URL**: `http://localhost:9999/admin/evaluation/assess`
- **方法**: POST
- **认证**: 无需认证

## 技术实现

### 后端技术栈
- **Spring Boot 3.5.5**
- **Thymeleaf模板引擎** - 页面渲染
- **Spring Security** - 安全配置（无需认证）
- **RestTemplate** - DeepSeek API调用

### 前端技术栈
- **Bootstrap 5.1.3** - UI框架
- **Bootstrap Icons** - 图标库
- **原生JavaScript** - 交互逻辑
- **响应式设计** - 支持移动端

## 项目结构

```
pig-upms/pig-upms-biz/src/main/
├── java/com/pig4cloud/pig/admin/
│   ├── controller/
│   │   └── StandardEvaluationController.java  # 控制器（页面路由+API）
│   ├── config/
│   │   └── EvaluationWebConfig.java          # 静态资源配置
│   ├── dto/                                  # 数据传输对象
│   ├── service/                              # 业务服务
│   └── service/impl/                         # 服务实现
└── resources/
    ├── templates/
    │   └── evaluation/
    │       └── index.html                    # Thymeleaf模板
    └── static/
        └── evaluation/
            ├── css/
            │   └── style.css                 # 样式文件
            └── js/
                └── app.js                    # JavaScript逻辑
```

## 配置说明

### 1. 安全配置
在 `application.yml` 中已配置：
```yaml
security:
  oauth2:
    ignore:
      urls:
        - /evaluation/**  # 标准评估模块无需登录
```

### 2. 静态资源配置
通过 `EvaluationWebConfig.java` 配置：
```java
registry.addResourceHandler("/evaluation/**")
        .addResourceLocations("classpath:/static/evaluation/");
```

### 3. DeepSeek API配置
```yaml
deepseek:
  api:
    url: https://api.deepseek.com/v1/chat/completions
    key: ${DEEPSEEK_API_KEY:}  # 从环境变量获取
```

## 使用流程

### 1. 启动系统
```bash
# 设置环境变量
export DEEPSEEK_API_KEY=your_deepseek_api_key_here

# 启动后端
cd pig-boot
mvn spring-boot:run
```

### 2. 访问页面
打开浏览器访问：`http://localhost:9999/admin/evaluation`

### 3. 使用功能
1. 在输入框中输入标准名称（如"元宇宙技术要求"）
2. 点击"开始评估"按钮
3. 等待评估完成，查看详细分析结果
4. 查看综合评估结论

## 页面特性

### 界面设计
- **现代化UI**：使用Bootstrap 5设计，界面美观
- **响应式布局**：支持PC和移动端访问
- **渐变背景**：视觉效果佳
- **动画效果**：页面交互流畅

### 功能特性
- **实时验证**：输入长度实时验证
- **加载状态**：评估过程中显示加载动画
- **错误处理**：友好的错误提示
- **结果展示**：Markdown表格自动转换为HTML
- **键盘快捷键**：支持Ctrl+Enter提交，Escape重置

### 评估维度
- **技术维度**：技术成熟度（TRL 1-9）、系统背景、竞争技术等
- **市场维度**：产品、供应链、用例、政策考量等
- **综合结论**：适合立项国标、研究课题或不适合标准化

## 部署说明

### 开发环境
1. 确保已安装Java 17+
2. 设置DeepSeek API密钥环境变量
3. 启动后端服务
4. 访问页面进行测试

### 生产环境
1. 配置生产环境的DeepSeek API密钥
2. 打包部署：`mvn clean package`
3. 运行jar包：`java -jar pig-upms-biz.jar`
4. 配置反向代理（如Nginx）指向后端服务

## 故障排除

### 常见问题

1. **页面无法访问**
   - 检查后端服务是否正常启动
   - 确认端口9999是否被占用
   - 检查安全配置是否正确

2. **评估失败**
   - 检查DeepSeek API密钥是否正确设置
   - 确认网络连接是否正常
   - 查看后端日志获取详细错误信息

3. **静态资源加载失败**
   - 检查静态资源配置是否正确
   - 确认文件路径是否存在
   - 检查浏览器控制台是否有404错误

### 日志查看
```bash
# 查看应用日志
tail -f logs/pig-upms-biz.log

# 查看特定错误
grep "ERROR" logs/pig-upms-biz.log
```

## 扩展功能

未来可以考虑添加的功能：
- 评估历史记录存储
- 批量评估功能
- 评估结果导出（PDF/Excel）
- 自定义评估模板
- 多语言支持
- 评估结果分享

## 联系支持

如有问题或建议，请联系开发团队。

---

**注意**：该模块已完全集成到Java项目中，无需单独部署前端，大大简化了部署和维护工作。
